{"version":3,"file":"688.0f10fcdb58f31ff7.js","mappings":"0OAKEA,MAAA,GACGA,MAAA,4CAAsCA,+BAOrCA,MAAA,GACGA,MAAA,aAAOA,+BAEVA,MAAA,GACGA,MAAA,mBAAaA,+BAEhBA,MAAA,GACGA,MAAA,eAASA,SCNX,IAAMC,EAAgB,MAAvB,MAAOA,EAOXC,YAAoBC,GAAAC,KAAAD,QANZC,KAAAC,SAAW,IAAIC,IAEbF,KAAAG,SAAmB,GACnBH,KAAAI,aAA6B,GAC7BJ,KAAAK,kBAA4B,CAEM,CAE5CC,WAAQ,IAAAC,EAAAP,KACNA,KAAKD,MAAMS,SAASC,QAAKC,KAAUV,KAAKC,WAAWU,UAAWC,IAC5DZ,KAAKG,SAAWS,EAAOC,IAAI,aAAe,KAG5Cb,KAAKD,MAAMe,cACRL,QAAKC,KAAUV,KAAKC,WACpBU,UAAS,eAAAI,KAAAC,KAAC,UAAOJ,GACwB,SAApCA,EAAOC,IAAI,sBACbN,EAAKU,mBAET,GAAC,gBAAAC,GAAA,OAAAH,EAAAI,MAAAnB,KAAAoB,UAAA,EAJS,GAKd,CAEcH,oBAAiB,IAAAI,EAAArB,KAAA,SAAAgB,KAAA,YAC7B,QAA2DM,IAAtDC,oBAA4BC,sBAG/B,OAFAC,QAAQC,IAAI,yCACZL,EAAKjB,aAAauB,mBAAoB,GAOxC,WAFEJ,oBACAC,yBACgBG,kBAGhB,OAFAF,QAAQC,IAAI,yCACZL,EAAKjB,aAAauB,mBAAoB,GAIxC,MAAMC,EAAY,IAAIC,WAAW,IACjCC,OAAOC,OAAOC,gBAAgBJ,GAE9BP,EAAKjB,aAAauB,mBAAoB,QAEhCG,OAAOG,UAAUC,YAAYC,OAAO,CACxCC,UAAW,cACXC,UAAW,CACTT,UAAWA,EACXU,GAAI,CACFC,KAAM,uBAERC,KAAM,CACJC,IAAI,IAAIC,aAAcC,OAAOtB,EAAKlB,UAClCoC,KAAMlB,EAAKlB,SACXyC,YAAavB,EAAKlB,UAEpB0C,iBAAkB,CAChB,CACEC,KAAM,aACNC,KAAK,OAOb1B,EAAKhB,kBAAmB,CAAK,EA3CA,EA4C/B,CAEA2C,cACEhD,KAAKC,SAASgD,OACdjD,KAAKC,SAASiD,UAChB,CAACC,SAAAnD,KAAA,mBAAAoD,iBAxEUvD,GAAgBD,MAAAyD,MAAA,EAAAF,SAAAnD,KAAA,UAAAsD,EAAAC,IAAA,MAAhB1D,EAAgB2D,UAAA,mBAAAC,YAAA,EAAAC,SAAA,CAAA9D,OAAA+D,MAAA,GAAAC,KAAA,EAAAC,OAAA,4DAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDd7BnE,MAAA,UAAAA,CAAyC,QACnCA,MAAA,gCAA0BA,QAC9BA,MAAA,SAAgBA,MAAA,4CAAsCA,QAEtDA,MAAA,QAAIA,MAAA,GAAoBA,QACxBA,MAAA,EAAAqE,EAAA,sBAIArE,MAAA,QAAIA,MAAA,0BAAoBA,QACxBA,MAAA,QAAAA,CAAI,SAEAA,MAAA,4BACAA,MAAA,GAAAsE,EAAA,sBAGAtE,MAAA,GAAAuE,EAAA,sBAGAvE,MAAA,GAAAwE,EAAA,sBAGFxE,mBAlBEA,MAAA,GAAAA,MAAA,SAAAoE,EAAA7D,SAAA,IACWP,MAAA,GAAAA,MAAA,OAAAoE,EAAA3D,kBAQIT,MAAA,GAAAA,MAAA,YAAA0B,IAAA0C,EAAA5D,aAAAuB,mBAGA/B,MAAA,GAAAA,MAAA,YAAAoE,EAAA5D,aAAAuB,mBAGA/B,MAAA,GAAAA,MAAA,YAAAoE,EAAA5D,aAAAuB,mCCPT0C,KAAYC,MAAAC,cAAA,WAEX1E,CAAgB","names":["i0","ProfileComponent","constructor","route","this","destroy$","Subject","username","capabilities","didCreatePasskey","ngOnInit","_this","paramMap","pipe","takeUntil","subscribe","params","get","queryParamMap","_ref","_asyncToGenerator","autoCreatePasskey","_x","apply","arguments","_this2","undefined","PublicKeyCredential","getClientCapabilities","console","log","conditionalCreate","challenge","Uint8Array","window","crypto","getRandomValues","navigator","credentials","create","mediation","publicKey","rp","name","user","id","TextEncoder","encode","displayName","pubKeyCredParams","type","alg","ngOnDestroy","next","complete","static","t","i1","_angular_core__WEBPACK_IMPORTED_MODULE_0__","Xpm","selectors","standalone","features","decls","vars","consts","template","rf","ctx","ProfileComponent_ng_container_7_Template","ProfileComponent_ng_container_13_Template","ProfileComponent_ng_container_14_Template","ProfileComponent_ng_container_15_Template","CommonModule","i2","encapsulation"],"sourceRoot":"webpack:///","sources":["./src/app/pages/account-demo/profile/profile.component.html","./src/app/pages/account-demo/profile/profile.component.ts"],"sourcesContent":["<div class=\"page-container container-md\">\n  <h1>Account Demo: User profile</h1>\n  <p class=\"lead\">This page represents a logged in view.</p>\n\n  <h2>User: {{ username }}</h2>\n  <ng-container *ngIf=\"didCreatePasskey\"\n    >A passkey was automatically registered</ng-container\n  >\n\n  <h2>Browser capabilities</h2>\n  <ul>\n    <li>\n      Conditional Create:\n      <ng-container *ngIf=\"capabilities.conditionalCreate === undefined\"\n        >Unknown</ng-container\n      >\n      <ng-container *ngIf=\"capabilities.conditionalCreate === false\"\n        >Not supported</ng-container\n      >\n      <ng-container *ngIf=\"capabilities.conditionalCreate === true\"\n        >Supported</ng-container\n      >\n    </li>\n  </ul>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subject, takeUntil } from 'rxjs';\n\ntype Capabilities = {\n  conditionalCreate?: boolean;\n};\n\n@Component({\n  templateUrl: './profile.component.html',\n  standalone: true,\n  imports: [CommonModule],\n})\nexport class ProfileComponent implements OnInit, OnDestroy {\n  private destroy$ = new Subject<void>();\n\n  protected username: string = '';\n  protected capabilities: Capabilities = {};\n  protected didCreatePasskey: boolean = false;\n\n  constructor(private route: ActivatedRoute) {}\n\n  ngOnInit(): void {\n    this.route.paramMap.pipe(takeUntil(this.destroy$)).subscribe((params) => {\n      this.username = params.get('username') || '';\n    });\n\n    this.route.queryParamMap\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(async (params) => {\n        if (params.get('conditionalCreate') === 'true') {\n          this.autoCreatePasskey();\n        }\n      });\n  }\n\n  private async autoCreatePasskey() {\n    if ((PublicKeyCredential as any).getClientCapabilities === undefined) {\n      console.log('Conditional creation unavailable');\n      this.capabilities.conditionalCreate = false;\n      return;\n    }\n\n    const capabilities = await (\n      PublicKeyCredential as any\n    ).getClientCapabilities();\n    if (!capabilities.conditionalCreate) {\n      console.log('Conditional creation unavailable');\n      this.capabilities.conditionalCreate = false;\n      return;\n    }\n\n    const challenge = new Uint8Array(32);\n    window.crypto.getRandomValues(challenge);\n\n    this.capabilities.conditionalCreate = true;\n\n    await window.navigator.credentials.create({\n      mediation: 'conditional',\n      publicKey: {\n        challenge: challenge,\n        rp: {\n          name: 'WebAuthn Tools Demo',\n        },\n        user: {\n          id: new TextEncoder().encode(this.username),\n          name: this.username,\n          displayName: this.username,\n        },\n        pubKeyCredParams: [\n          {\n            type: 'public-key',\n            alg: -7,\n          },\n        ],\n      },\n      // Needed because `mediation` is not yet supported in current TypeScript definitions\n    } as CredentialCreationOptions);\n\n    this.didCreatePasskey = true;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n"],"x_google_ignoreList":[]}