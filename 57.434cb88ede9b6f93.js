"use strict";(self.webpackChunkwebauthn_tools=self.webpackChunkwebauthn_tools||[]).push([[57],{3057:(Z,l,r)=>{r.r(l),r.d(l,{ExistenceCheckerComponent:()=>C});var u=r(1670),a=r(8497),p=r(895);function c(){return window.coroiu}var h=r(6575),e=r(1699);function g(t,s){1&t&&(e.TgZ(0,"div",9),e._uU(1," Yes "),e.qZA())}function v(t,s){1&t&&(e.TgZ(0,"div",10),e._uU(1," No "),e.qZA())}function k(t,s){1&t&&(e.TgZ(0,"div",10),e._uU(1," Unknown "),e.qZA())}function f(t,s){1&t&&(e.TgZ(0,"div",10),e._uU(1," No "),e.qZA())}function y(t,s){1&t&&(e.ynx(0),e.TgZ(1,"div",9),e._uU(2,"Possibly"),e.qZA(),e._uU(3," Either your passkey provider contains a credential or your vault was locked. "),e.BQk())}let C=(()=>{class t{constructor(){this.passkeyProviderDetected=!1,this.credentialDetected=null}ngOnInit(){this.passkeyProviderDetected=this.checkPasskeyProvider(),this.checkCredentials()}checkCredentials(){var o=this;return(0,u.Z)(function*(){if(!o.passkeyProviderDetected)return;let i=!1;c().webauthn.interceptors.get=function(){var d=(0,u.Z)(function*(m){return i=!0,yield c().webauthn.native.get.bind(c().webauthn.native.credentialsContainer)(m)});return function(m){return d.apply(this,arguments)}}();const n=new AbortController;try{window.navigator.credentials.get({publicKey:{challenge:new Uint8Array([1,2,3,4,5])},signal:n.signal},n)}catch{}setTimeout(()=>{try{o.credentialDetected=!i,n.abort()}finally{c().webauthn.interceptors.get=void 0}},500)})()}createCredential(){window.navigator.credentials.create({publicKey:{rp:{name:"Coroiu"},user:{id:new Uint8Array([1,2,3,4,5]),name:"Existence checker user",displayName:"Existence checker user"},authenticatorSelection:{residentKey:"required"},challenge:new Uint8Array([1,2,3,4,5]),pubKeyCredParams:[{type:"public-key",alg:-7}],timeout:6e4}})}checkPasskeyProvider(){return window.navigator.credentials.get!==c().webauthn.native.get&&window.navigator.credentials.get!==c().webauthn.injectors.get}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:41,vars:6,consts:[[1,"page-container","container-md"],[1,"lead"],[1,"row","align-items-stretch"],[1,"col-md"],["class","detection-result text-success",4,"ngIf"],["class","detection-result text-danger",4,"ngIf"],["mat-raised-button","",3,"click"],[4,"ngIf"],["mat-raised-button","",3,"disabled","click"],[1,"detection-result","text-success"],[1,"detection-result","text-danger"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Credential existence checker"),e.qZA(),e.TgZ(3,"p",1),e._uU(4,"Passive and active techniques to scrape information"),e.qZA(),e._uU(5," Uses methods available to the page script to check if the user has a passkey provider installed, and if that provider has a passkey for this site. "),e.TgZ(6,"div",2)(7,"div",3)(8,"mat-card")(9,"mat-card-header")(10,"mat-card-title"),e._uU(11,"Passkey provider"),e.qZA(),e.TgZ(12,"mat-card-subtitle"),e._uU(13,"Does your browser have a passkey provider installed?"),e.qZA()(),e.TgZ(14,"mat-card-content"),e.YNc(15,g,2,0,"div",4),e.YNc(16,v,2,0,"div",5),e.qZA()()(),e.TgZ(17,"div",3)(18,"mat-card")(19,"mat-card-header")(20,"mat-card-title"),e._uU(21,"Create credential"),e.qZA(),e.TgZ(22,"mat-card-subtitle"),e._uU(23,"Use this to create credentials for testing"),e.qZA()(),e.TgZ(24,"mat-card-actions")(25,"button",6),e.NdJ("click",function(){return n.createCredential()}),e._uU(26," Create credential "),e.qZA()()()(),e.TgZ(27,"div",3)(28,"mat-card")(29,"mat-card-header")(30,"mat-card-title"),e._uU(31,"Existence"),e.qZA(),e.TgZ(32,"mat-card-subtitle"),e._uU(33,"Does your passkey provider contain any credentials?"),e.qZA()(),e.TgZ(34,"mat-card-content"),e.YNc(35,k,2,0,"div",5),e.YNc(36,f,2,0,"div",5),e.YNc(37,y,4,0,"ng-container",7),e.qZA(),e.TgZ(38,"mat-card-actions")(39,"button",8),e.NdJ("click",function(){return n.checkCredentials()}),e._uU(40," Re-check credentials "),e.qZA()()()()()()),2&i&&(e.xp6(15),e.Q6J("ngIf",n.passkeyProviderDetected),e.xp6(1),e.Q6J("ngIf",!n.passkeyProviderDetected),e.xp6(19),e.Q6J("ngIf",!n.passkeyProviderDetected),e.xp6(1),e.Q6J("ngIf",n.passkeyProviderDetected&&!n.credentialDetected),e.xp6(1),e.Q6J("ngIf",n.passkeyProviderDetected&&n.credentialDetected),e.xp6(2),e.Q6J("disabled",!n.passkeyProviderDetected))},dependencies:[h.ez,h.O5,a.QW,a.a8,a.hq,a.dn,a.dk,a.$j,a.n5,p.ot,p.lW],styles:["mat-card[_ngcontent-%COMP%]{margin-top:2rem}.detection-result[_ngcontent-%COMP%]{margin-top:1rem;font-size:3rem}"]})}return t})()}}]);
//# sourceMappingURL=57.434cb88ede9b6f93.js.map