"use strict";(self.webpackChunkwebauthn_tools=self.webpackChunkwebauthn_tools||[]).push([[688],{688:(h,r,o)=>{o.r(r),o.d(r,{ProfileComponent:()=>C});var l=o(5861),c=o(6814),d=o(8645),u=o(9773),e=o(5879),p=o(2058);function _(t,s){1&t&&(e.ynx(0),e._uU(1,"A passkey was automatically registered"),e.BQk())}function m(t,s){1&t&&(e.ynx(0),e._uU(1,"Unknown"),e.BQk())}function f(t,s){1&t&&(e.ynx(0),e._uU(1,"Not supported"),e.BQk())}function g(t,s){1&t&&(e.ynx(0),e._uU(1,"Supported"),e.BQk())}let C=(()=>{class t{constructor(n){this.route=n,this.destroy$=new d.x,this.username="",this.capabilities={},this.didCreatePasskey=!1}ngOnInit(){var n=this;this.route.paramMap.pipe((0,u.R)(this.destroy$)).subscribe(i=>{this.username=i.get("username")||""}),this.route.queryParamMap.pipe((0,u.R)(this.destroy$)).subscribe(function(){var i=(0,l.Z)(function*(a){"true"===a.get("conditionalCreate")&&n.autoCreatePasskey()});return function(a){return i.apply(this,arguments)}}())}autoCreatePasskey(){var n=this;return(0,l.Z)(function*(){if(void 0===PublicKeyCredential.getClientCapabilities)return console.log("Conditional creation unavailable"),void(n.capabilities.conditionalCreate=!1);if(!(yield PublicKeyCredential.getClientCapabilities()).conditionalCreate)return console.log("Conditional creation unavailable"),void(n.capabilities.conditionalCreate=!1);const a=new Uint8Array(32);window.crypto.getRandomValues(a),n.capabilities.conditionalCreate=!0,yield window.navigator.credentials.create({mediation:"conditional",publicKey:{challenge:a,rp:{name:"WebAuthn Tools Demo"},user:{id:(new TextEncoder).encode(n.username),name:n.username,displayName:n.username},pubKeyCredParams:[{type:"public-key",alg:-7}]}}),n.didCreatePasskey=!0})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(p.gz))};static#n=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:16,vars:5,consts:[[1,"page-container","container-md"],[1,"lead"],[4,"ngIf"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Account Demo: User profile"),e.qZA(),e.TgZ(3,"p",1),e._uU(4,"This page represents a logged in view."),e.qZA(),e.TgZ(5,"h2"),e._uU(6),e.qZA(),e.YNc(7,_,2,0,"ng-container",2),e.TgZ(8,"h2"),e._uU(9,"Browser capabilities"),e.qZA(),e.TgZ(10,"ul")(11,"li"),e._uU(12," Conditional Create: "),e.YNc(13,m,2,0,"ng-container",2),e.YNc(14,f,2,0,"ng-container",2),e.YNc(15,g,2,0,"ng-container",2),e.qZA()()()),2&i&&(e.xp6(6),e.hij("User: ",a.username,""),e.xp6(1),e.Q6J("ngIf",a.didCreatePasskey),e.xp6(6),e.Q6J("ngIf",void 0===a.capabilities.conditionalCreate),e.xp6(1),e.Q6J("ngIf",!1===a.capabilities.conditionalCreate),e.xp6(1),e.Q6J("ngIf",!0===a.capabilities.conditionalCreate))},dependencies:[c.ez,c.O5],encapsulation:2})}return t})()}}]);