"use strict";(self.webpackChunkwebauthn_tools=self.webpackChunkwebauthn_tools||[]).push([[57],{3057:(Z,g,a)=>{a.r(g),a.d(g,{ExistenceCheckerComponent:()=>k});var m=a(1670),i=a(8497),u=a(895);function r(){return window.coroiu}var l=a(6575),e=a(1699);function p(t,v){1&t&&(e.TgZ(0,"div",9),e._uU(1," Yes "),e.qZA())}function h(t,v){1&t&&(e.TgZ(0,"div",10),e._uU(1," No "),e.qZA())}function s(t,v){1&t&&(e.TgZ(0,"div",10),e._uU(1," Unknown "),e.qZA())}function o(t,v){1&t&&(e.TgZ(0,"div",10),e._uU(1," No "),e.qZA())}function c(t,v){1&t&&(e.ynx(0),e.TgZ(1,"div",9),e._uU(2,"Possibly"),e.qZA(),e._uU(3," Either your passkey provider contains a credential or your vault was locked. "),e.BQk())}let k=(()=>{class t{constructor(){this.passkeyProviderDetected=!1,this.credentialDetected=null}ngOnInit(){this.passkeyProviderDetected=this.checkPasskeyProvider(),this.checkCredentials()}checkCredentials(){var f=this;return(0,m.Z)(function*(){if(!f.passkeyProviderDetected)return;let d=!1;r().webauthn.interceptors.get=function(){var y=(0,m.Z)(function*(C){return d=!0,yield r().webauthn.native.get.bind(r().webauthn.native.credentialsContainer)(C)});return function(C){return y.apply(this,arguments)}}();const n=new AbortController;try{window.navigator.credentials.get({publicKey:{challenge:new Uint8Array([1,2,3,4,5])},signal:n.signal},n)}catch{}setTimeout(()=>{try{f.credentialDetected=!d,n.abort()}finally{r().webauthn.interceptors.get=void 0}},500)})()}createCredential(){window.navigator.credentials.create({publicKey:{rp:{name:"Coroiu"},user:{id:new Uint8Array([1,2,3,4,5]),name:"Existence checker user",displayName:"Existence checker user"},authenticatorSelection:{residentKey:"required"},challenge:new Uint8Array([1,2,3,4,5]),pubKeyCredParams:[{type:"public-key",alg:-7}],timeout:6e4}})}checkPasskeyProvider(){return window.navigator.credentials.get!==r().webauthn.native.get&&window.navigator.credentials.get!==r().webauthn.injectors.get}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:41,vars:6,consts:[[1,"page-container","container-md"],[1,"lead"],[1,"row","align-items-stretch"],[1,"col-md"],["class","detection-result text-success",4,"ngIf"],["class","detection-result text-danger",4,"ngIf"],["mat-raised-button","",3,"click"],[4,"ngIf"],["mat-raised-button","",3,"disabled","click"],[1,"detection-result","text-success"],[1,"detection-result","text-danger"]],template:function(d,n){1&d&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Credential existence checker"),e.qZA(),e.TgZ(3,"p",1),e._uU(4,"Passive and active techniques to scrape information"),e.qZA(),e._uU(5," Uses methods available to the page script to check if the user has a passkey provider installed, and if that provider has a passkey for this site. "),e.TgZ(6,"div",2)(7,"div",3)(8,"mat-card")(9,"mat-card-header")(10,"mat-card-title"),e._uU(11,"Passkey provider"),e.qZA(),e.TgZ(12,"mat-card-subtitle"),e._uU(13,"Does your browser have a passkey provider installed?"),e.qZA()(),e.TgZ(14,"mat-card-content"),e.YNc(15,p,2,0,"div",4),e.YNc(16,h,2,0,"div",5),e.qZA()()(),e.TgZ(17,"div",3)(18,"mat-card")(19,"mat-card-header")(20,"mat-card-title"),e._uU(21,"Create credential"),e.qZA(),e.TgZ(22,"mat-card-subtitle"),e._uU(23,"Use this to create credentials for testing"),e.qZA()(),e.TgZ(24,"mat-card-actions")(25,"button",6),e.NdJ("click",function(){return n.createCredential()}),e._uU(26," Create credential "),e.qZA()()()(),e.TgZ(27,"div",3)(28,"mat-card")(29,"mat-card-header")(30,"mat-card-title"),e._uU(31,"Existence"),e.qZA(),e.TgZ(32,"mat-card-subtitle"),e._uU(33,"Does your passkey provider contain any credentials?"),e.qZA()(),e.TgZ(34,"mat-card-content"),e.YNc(35,s,2,0,"div",5),e.YNc(36,o,2,0,"div",5),e.YNc(37,c,4,0,"ng-container",7),e.qZA(),e.TgZ(38,"mat-card-actions")(39,"button",8),e.NdJ("click",function(){return n.checkCredentials()}),e._uU(40," Re-check credentials "),e.qZA()()()()()()),2&d&&(e.xp6(15),e.Q6J("ngIf",n.passkeyProviderDetected),e.xp6(1),e.Q6J("ngIf",!n.passkeyProviderDetected),e.xp6(19),e.Q6J("ngIf",!n.passkeyProviderDetected),e.xp6(1),e.Q6J("ngIf",n.passkeyProviderDetected&&!n.credentialDetected),e.xp6(1),e.Q6J("ngIf",n.passkeyProviderDetected&&n.credentialDetected),e.xp6(2),e.Q6J("disabled",!n.passkeyProviderDetected))},dependencies:[l.ez,l.O5,i.QW,i.a8,i.hq,i.dn,i.dk,i.$j,i.n5,u.ot,u.lW],styles:["mat-card[_ngcontent-%COMP%]{margin-top:2rem}.detection-result[_ngcontent-%COMP%]{margin-top:1rem;font-size:3rem}"]})}return t})()},1670:(Z,g,a)=>{function m(u,r,l,e,p,h,s){try{var o=u[h](s),c=o.value}catch(k){return void l(k)}o.done?r(c):Promise.resolve(c).then(e,p)}function i(u){return function(){var r=this,l=arguments;return new Promise(function(e,p){var h=u.apply(r,l);function s(c){m(h,e,p,s,o,"next",c)}function o(c){m(h,e,p,s,o,"throw",c)}s(void 0)})}}a.d(g,{Z:()=>i})}}]);
//# sourceMappingURL=57.913cd60bd6b7f5ee.js.map